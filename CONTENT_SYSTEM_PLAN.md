# ğŸ® Sistema de Contenido DinÃ¡mico - Plan Completo\n\n**Objetivo:** Todo el contenido del juego en JSON, editable sin cÃ³digo\n\n**Fecha:** 2025-10-29  \n**Estado:** DiseÃ±o inicial\n\n---\n\n## ğŸ“‹ Contenido que serÃ¡ JSON\n\n### âœ… Ya en JSON (prÃ³ximo):\n- Eventos (Encuentros y Peligros)\n- Cartas de juego (Crew, Attack, Skill, Equipment)\n- Naves (con estadÃ­sticas especiales)\n- Tiendas (inventario, traits, servicios)\n- DiÃ¡logos entre personajes\n- Mensajes del sistema\n- Efectos visuales\n- Sinergias\n- Logros\n- Banderas narrativas\n\n### ğŸ“ Estructura de archivos:\n\n```\npublic/\nâ””â”€â”€ content/\n    â”œâ”€â”€ content.json              â† ARCHIVO PRINCIPAL (todo integrado)\n    â”œâ”€â”€ content.schema.json       â† Esquema de validaciÃ³n\n    â”œâ”€â”€ examples/\n    â”‚   â”œâ”€â”€ event-encounter.json\n    â”‚   â”œâ”€â”€ card-crew.json\n    â”‚   â”œâ”€â”€ card-ship.json\n    â”‚   â”œâ”€â”€ shop.json\n    â”‚   â”œâ”€â”€ dialogue.json\n    â”‚   â””â”€â”€ synergy.json\n    â””â”€â”€ media/                    â† ImÃ¡genes y videos\n        â”œâ”€â”€ events/\n        â”œâ”€â”€ cards/\n        â”œâ”€â”€ ships/\n        â””â”€â”€ characters/\n```\n\n---\n\n## ğŸ—ï¸ Estructura ContentSchema (tipos/content-schema.ts)\n\n```typescript\ninterface ContentSchema {\n  version: string;                // \"1.0.0\"\n  metadata: {...};                // InformaciÃ³n del contenido\n  \n  // CARTAS DE JUEGO\n  cards: GameCard[];\n  ships: ShipCard[];\n  \n  // TIENDAS\n  shops: Shop[];\n  \n  // NARRATIVA Y EVENTOS\n  encounters: EventCard[];\n  hazards: EventCard[];\n  \n  // DIÃLOGOS\n  dialogues: DialogueSequence[];\n  messages: MessageWindow[];\n  \n  // EFECTOS Y MECÃNICA\n  synergies: Synergy[];\n  achievements: Achievement[];\n  \n  // CONFIGURACIÃ“N\n  flags: Record<string, NarrativeFlag>;\n  combatEffects: Record<string, CombatEffectDefinition>;\n}\n```\n\n---\n\n## ğŸ² Ejemplo: Estructura de un Evento\n\n```json\n{\n  \"id\": \"enc_ghost_transmission\",\n  \"title\": \"TransmisiÃ³n Fantasma\",\n  \"type\": \"encounter\",\n  \"description\": \"Un antiguo cÃ³digo de la HegemonÃ­a\",\n  \"image\": {\n    \"url\": \"content/media/events/transmission.jpg\",\n    \"orientation\": \"horizontal\"\n  },\n  \"video\": null,\n  \"narrative\": {\n    \"intro\": [\n      \"Los sensores de largo alcance captan una transmisiÃ³n anÃ³mala.\",\n      \"Es un antiguo cÃ³digo de la HegemonÃ­a, inactivo durante dÃ©cadas.\"\n    ],\n    \"prompt\": \"Â¿CÃ³mo procedes?\"\n  },\n  \"dialogue\": {\n    \"id\": \"dlg_ghost_start\",\n    \"title\": \"Alarma del Sistema\",\n    \"messages\": [\n      {\n        \"character\": \"SYSTEM\",\n        \"text\": \"âš ï¸ ALERTA: SeÃ±al anÃ³mala detectada\",\n        \"duration\": 1000\n      }\n    ]\n  },\n  \"options\": [\n    {\n      \"id\": \"opt_decode\",\n      \"text\": \"[DECODIFICAR] Usar los sistemas de la nave\",\n      \"requirements\": {\n        \"crew\": [\"CREW_DR_ARIS_THORN\"]\n      },\n      \"consequence\": {\n        \"rolls\": [\n          {\n            \"probability\": 75,\n            \"changes\": {\n              \"credits\": 15,\n              \"xp\": 40\n            },\n            \"flags\": {\n              \"ai_fragment_collected\": true\n            },\n            \"affinity\": {\n              \"CREW_DR_ARIS_THORN\": 1\n            },\n            \"achievement\": \"GHOST_IN_THE_MACHINE\",\n            \"narrative\": {\n              \"reaction\": \"Dr. Thorn: 'Interceptando... Lo tengo.'\",\n              \"log\": \"El Dr. Thorn extrae un paquete de datos valioso.\"\n            },\n            \"messages\": [\n              {\n                \"id\": \"msg_success\",\n                \"type\": \"success\",\n                \"title\": \"Datos Adquiridos\",\n                \"content\": \"Â¡+15 CrÃ©ditos!\",\n                \"duration\": 2000\n              }\n            ]\n          },\n          {\n            \"probability\": 25,\n            \"changes\": {\n              \"hullDamage\": 5\n            },\n            \"narrative\": {\n              \"reaction\": \"Dr. Thorn: 'Â¡Es una trampa!'\",\n              \"log\": \"Una sobrecarga daÃ±a los sistemas.\"\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"id\": \"opt_respond\",\n      \"text\": \"[RESPONDER] Usar el Protocolo Vex\",\n      \"requirements\": {\n        \"narrativeFlags\": [\"knows_vex_code\"]\n      },\n      \"consequence\": {\n        \"rolls\": [\n          {\n            \"probability\": 100,\n            \"changes\": {\n              \"xp\": 50\n            },\n            \"narrative\": {\n              \"log\": \"Recibes coordenadas de encuentro secreto...\"\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"id\": \"opt_ignore\",\n      \"text\": \"[IGNORAR] Es demasiado riesgoso\",\n      \"consequence\": {\n        \"rolls\": [\n          {\n            \"probability\": 100,\n            \"changes\": {\n              \"moral\": -1\n            },\n            \"narrative\": {\n              \"log\": \"La tripulaciÃ³n murmura decepciÃ³n.\"\n            }\n          }\n        ]\n      }\n    }\n  ]\n}\n```\n\n---\n\n## ğŸ‘¤ Ejemplo: Carta de TripulaciÃ³n\n\n```json\n{\n  \"id\": \"CREW_DR_ARIS_THORN\",\n  \"type\": \"Crew\",\n  \"name\": \"Dr. Aris Thorn\",\n  \"faction\": \"Academia\",\n  \"rarity\": \"Common\",\n  \"cost\": 0,\n  \"price\": 7,\n  \"image\": \"content/media/cards/dr-aris-thorn.jpg\",\n  \"description\": \"Investigador dedicado. Sinergia: Academia\",\n  \"flavorText\": \"'La verdad estÃ¡ en los datos.'\",\n  \"stats\": {\n    \"attack\": 0,\n    \"defense\": 0,\n    \"special\": \"DecodificaciÃ³n de datos antiguos\"\n  },\n  \"synergies\": {\n    \"Academia\": {\n      \"effect\": \"GAIN_ENERGY\",\n      \"value\": 1,\n      \"description\": \"+1 EnergÃ­a por miembro de Academia\"\n    }\n  },\n  \"affinity\": {\n    \"CREW_CAPITANA_VEX\": {\n      \"type\": \"neutral\",\n      \"value\": 0,\n      \"description\": \"Sin relaciÃ³n particular\"\n    },\n    \"CREW_KAELEN_INGENIERO\": {\n      \"type\": \"positive\",\n      \"value\": 2,\n      \"description\": \"Aliados acadÃ©micos\"\n    }\n  },\n  \"combatEffects\": [\n    {\n      \"id\": \"effect_analyze\",\n      \"name\": \"AnÃ¡lisis Profundo\",\n      \"description\": \"+20 XP en eventos de anÃ¡lisis\",\n      \"trigger\": \"on_event_option\",\n      \"condition\": \"option.type === 'analysis'\",\n      \"effect\": \"ADD_XP_BONUS\",\n      \"value\": 20\n    }\n  ],\n  \"tags\": [\"scientist\", \"academia\", \"support\"]\n}\n```\n\n---\n\n## ğŸš¢ Ejemplo: Nave\n\n```json\n{\n  \"id\": \"SHIP_CORSAIR\",\n  \"type\": \"Ship\",\n  \"name\": \"Corsario Estelar\",\n  \"faction\": \"Neutral\",\n  \"rarity\": \"Uncommon\",\n  \"cost\": 0,\n  \"price\": 0,\n  \"image\": \"content/media/ships/corsair.jpg\",\n  \"description\": \"Nave equilibrada con buen blindaje.\",\n  \"maxHull\": 30,\n  \"maxFuel\": 10,\n  \"maxShields\": 20,\n  \"specialAbility\": {\n    \"id\": \"ability_evasive_maneuver\",\n    \"name\": \"Maniobra Evasiva\",\n    \"description\": \"Aumenta defensa en 5 por turno\",\n    \"trigger\": \"on_combat_start\",\n    \"effect\": \"GAIN_DEFENSE\",\n    \"value\": 5,\n    \"duration\": 1\n  }\n}\n```\n\n---\n\n## ğŸ¬ Ejemplo: Tienda\n\n```json\n{\n  \"id\": \"shop_station_alpha\",\n  \"name\": \"Mercado de EstaciÃ³n Alfa\",\n  \"description\": \"Centro comercial de la estaciÃ³n\",\n  \"owner\": \"Vendedor Zyx\",\n  \"location\": \"EstaciÃ³n Orbital Alfa\",\n  \"traits\": [\n    {\n      \"id\": \"trait_generous\",\n      \"name\": \"Generoso\",\n      \"effect\": {\n        \"name\": \"Descuento en Cartas\",\n        \"effect\": \"Reduce precios\",\n        \"description\": \"30% de descuento en todas las cartas\"\n      },\n      \"priceModifier\": -0.3,\n      \"stockModifier\": 2\n    }\n  ],\n  \"inventory\": [\n    { \"cardId\": \"CREW_KAELEN_INGENIERO\", \"quantity\": 1 },\n    { \"cardId\": \"CREW_ZARA_ARTILLERA\", \"quantity\": 1 },\n    { \"cardId\": \"ATTACK_1\", \"quantity\": 3 }\n  ],\n  \"services\": {\n    \"removeCard\": true,\n    \"repairHull\": true,\n    \"upgradeCard\": false\n  },\n  \"dialogue\": {\n    \"id\": \"dlg_shop_welcome\",\n    \"title\": \"Bienvenida a la Tienda\",\n    \"messages\": [\n      {\n        \"character\": \"CREW_ZYX_COMERCIANTE\",\n        \"text\": \"Â¡Bienvenido! Mira mi inventario.\",\n        \"duration\": 2000\n      }\n    ]\n  }\n}\n```\n\n---\n\n## ğŸ’¬ Ejemplo: DiÃ¡logo\n\n```json\n{\n  \"id\": \"dlg_vex_discovery\",\n  \"title\": \"Descubrimiento de Vex\",\n  \"characters\": [\"CREW_CAPITANA_VEX\", \"CREW_DR_ARIS_THORN\"],\n  \"background\": {\n    \"url\": \"content/media/backgrounds/bridge.jpg\"\n  },\n  \"messages\": [\n    {\n      \"character\": \"CREW_CAPITANA_VEX\",\n      \"text\": \"Este cÃ³digo... lo reconozco. Protocolo Vex.\",\n      \"image\": {\n        \"url\": \"content/media/characters/vex-reaction.jpg\",\n        \"orientation\": \"vertical\"\n      },\n      \"duration\": 3000,\n      \"effect\": \"fade-in\"\n    },\n    {\n      \"character\": \"CREW_DR_ARIS_THORN\",\n      \"text\": \"Â¿Vex? Esa civilizaciÃ³n fue aniquilada hace siglos.\",\n      \"image\": {\n        \"url\": \"content/media/characters/thorn-curious.jpg\",\n        \"orientation\": \"vertical\"\n      },\n      \"duration\": 3000\n    },\n    {\n      \"character\": \"SYSTEM\",\n      \"text\": \"Se establece bandera narrativa: knows_vex_code\",\n      \"duration\": 1500\n    }\n  ]\n}\n```\n\n---\n\n## ğŸ”— Ejemplo: Sinergia\n\n```json\n{\n  \"id\": \"SYNERGY_ACADEMY_ENERGY\",\n  \"name\": \"Sinergia Academia - EnergÃ­a\",\n  \"description\": \"La Academia comparte conocimiento energÃ©tico.\",\n  \"factions\": [\"Academia\"],\n  \"minCount\": 1,\n  \"effect\": \"GAIN_ENERGY\",\n  \"value\": 1,\n  \"bonus\": \"Cada miembro de Academia otorga +1 energÃ­a al inicio del combate\",\n  \"visual\": {\n    \"id\": \"vfx_academy_glow\",\n    \"type\": \"overlay\",\n    \"content\": {\n      \"image\": {\n        \"url\": \"content/media/effects/academy-glow.png\"\n      }\n    },\n    \"duration\": 500,\n    \"animation\": \"fade-in\"\n  }\n}\n```\n\n---\n\n## ğŸ“Š Flujo de Carga de Contenido\n\n```\nApp inicia\n    â†“\nContentEngine.load('content/content.json')\n    â†“\nValidar contra schema\n    â†“\nParsear y cachear datos\n    â†“\nDisponible en toda la app\n    â†“\nComponentes usan: engine.getEvent(), engine.getCard(), etc.\n```\n\n---\n\n## ğŸ¬ Editor Web - Estructura\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  NAVEGADOR GALÃCTICO - Content Editor v1.0         â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ [Eventos] [Cartas] [Naves] [Tiendas] [DiÃ¡logos]   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                     â”‚\nâ”‚  EVENTOS                                            â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚ Lista de Eventos    â”‚  â”‚ Editor / Preview   â”‚   â”‚\nâ”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                    â”‚   â”‚\nâ”‚  â”‚ âœ“ TransmisiÃ³n...    â”‚  â”‚ TÃ­tulo: [input]    â”‚   â”‚\nâ”‚  â”‚ âœ“ AnomalÃ­a Ines...  â”‚  â”‚ Tipo: [select]     â”‚   â”‚\nâ”‚  â”‚ â—‹ [Nuevo]           â”‚  â”‚                    â”‚   â”‚\nâ”‚  â”‚                     â”‚  â”‚ Narrative:         â”‚   â”‚\nâ”‚  â”‚                     â”‚  â”‚   Intro 1: [text]  â”‚   â”‚\nâ”‚  â”‚                     â”‚  â”‚   Intro 2: [text]  â”‚   â”‚\nâ”‚  â”‚                     â”‚  â”‚                    â”‚   â”‚\nâ”‚  â”‚                     â”‚  â”‚ [+ OpciÃ³n]         â”‚   â”‚\nâ”‚  â”‚                     â”‚  â”‚ [Guardar] [Prev]   â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ› ï¸ Herramientas del Editor\n\n### **Funcionalidades:**\n1. âœ… CRUD completo (Crear, Leer, Actualizar, Borrar)\n2. âœ… Preview en tiempo real de eventos\n3. âœ… ValidaciÃ³n en vivo (errores en rojo)\n4. âœ… Gestor de medios (upload de imÃ¡genes/videos)\n5. âœ… Selector de referencias (combobox de cartas, personajes, etc)\n6. âœ… Visualizador de probabilidades\n7. âœ… Export/Import JSON\n8. âœ… BÃºsqueda y filtrado\n9. âœ… Historial de cambios\n10. âœ… ValidaciÃ³n de esquema\n\n### **TecnologÃ­a:**\n- HTML5 + Vanilla JS (o Alpine.js para reactividad)\n- IndexedDB para almacenar drafts\n- Descarga JSON nativo del navegador\n- Drag & drop para reordenar\n\n---\n\n## ğŸ® Motor de Contenido (ContentEngine)\n\n```typescript\nclass ContentEngine {\n  private schema: ContentSchema;\n  private cache: Map<string, any>;\n  \n  async load(path: string) {\n    const json = await fetch(path).then(r => r.json());\n    this.validate(json);\n    this.schema = json;\n    this.buildCache();\n  }\n  \n  getEvent(type: 'encounter' | 'hazard'): EventCard {\n    // Retorna evento aleatorio sin repetir\n  }\n  \n  getCard(id: string): GameCard {\n    // Retorna carta por ID\n  }\n  \n  resolveConsequence(option: EventOption, playerState): StateChanges {\n    // Calcula cambios segÃºn probabilidades\n  }\n  \n  resolveDialogue(dialogueId: string): DialogueSequence {\n    // Obtiene y renderiza diÃ¡logo\n  }\n  \n  calculateSynergy(crew: string[], state): SynergyBonus {\n    // Calcula sinergias activas\n  }\n}\n```\n\n---\n\n## ğŸ“ˆ Fases de ImplementaciÃ³n\n\n### **Fase 1: Esquema + Motor (esta semana)**\n- âœ… Tipos TypeScript completos\n- [ ] JSON de ejemplo\n- [ ] ContentEngine bÃ¡sico\n\n### **Fase 2: Editor Web (prÃ³xima semana)**\n- [ ] Interfaz HTML\n- [ ] CRUD para eventos\n- [ ] Preview\n- [ ] Guardado/carga\n\n### **Fase 3: ExpansiÃ³n (semana 3)**\n- [ ] Editor de cartas/naves\n- [ ] Editor de tiendas\n- [ ] Editor de diÃ¡logos\n- [ ] Gestor de medios\n\n### **Fase 4: IntegraciÃ³n (semana 4)**\n- [ ] Reemplazar constants.ts\n- [ ] Integrar en componentes React\n- [ ] Testing del motor\n- [ ] OptimizaciÃ³n de carga\n\n---\n\n## ğŸ’¾ Beneficios de esta Arquitectura\n\nâœ… **SeparaciÃ³n de preocupaciones:** Contenido â‰  CÃ³digo  \nâœ… **FÃ¡cil de mantener:** Editar JSON sin riesgo  \nâœ… **Escalable:** Agregar 100 eventos es trivial  \nâœ… **Colaborativo:** Otros pueden editar contenido  \nâœ… **Versionable:** Git controla JSON  \nâœ… **Flexible:** Cambiar mecÃ¡nicas es fÃ¡cil  \nâœ… **Testeable:** Validar schemas automÃ¡ticamente  \nâœ… **Portable:** JSON es universal  \n\n---\n\n## ğŸ“ PrÃ³ximo Paso\n\n1. âœ… Definir tipos (types/content-schema.ts)\n2. [ ] Crear archivo JSON de ejemplo lleno\n3. [ ] DiseÃ±ar editor web (HTML/CSS/JS)\n4. [ ] Implementar motor (ContentEngine)\n5. [ ] Integrar en juego\n\n**Â¿Comenzamos con el JSON de ejemplo?**\n"}