# üéÆ Sistema de Contenido Din√°mico - Plan Completo\n\n**Objetivo:** Todo el contenido del juego en JSON, editable sin c√≥digo\n\n**Fecha:** 2025-10-29  \n**Estado:** Dise√±o inicial\n\n---\n\n## üìã Contenido que ser√° JSON\n\n### ‚úÖ Ya en JSON (pr√≥ximo):\n- Eventos (Encuentros y Peligros)\n- Cartas de juego (Crew, Attack, Skill, Equipment)\n- Naves (con estad√≠sticas especiales)\n- Tiendas (inventario, traits, servicios)\n- Di√°logos entre personajes\n- Mensajes del sistema\n- Efectos visuales\n- Sinergias\n- Logros\n- Banderas narrativas\n\n### üìÅ Estructura de archivos:\n\n```\npublic/\n‚îî‚îÄ‚îÄ content/\n    ‚îú‚îÄ‚îÄ content.json              ‚Üê ARCHIVO PRINCIPAL (todo integrado)\n    ‚îú‚îÄ‚îÄ content.schema.json       ‚Üê Esquema de validaci√≥n\n    ‚îú‚îÄ‚îÄ examples/\n    ‚îÇ   ‚îú‚îÄ‚îÄ event-encounter.json\n    ‚îÇ   ‚îú‚îÄ‚îÄ card-crew.json\n    ‚îÇ   ‚îú‚îÄ‚îÄ card-ship.json\n    ‚îÇ   ‚îú‚îÄ‚îÄ shop.json\n    ‚îÇ   ‚îú‚îÄ‚îÄ dialogue.json\n    ‚îÇ   ‚îî‚îÄ‚îÄ synergy.json\n    ‚îî‚îÄ‚îÄ media/                    ‚Üê Im√°genes y videos\n        ‚îú‚îÄ‚îÄ events/\n        ‚îú‚îÄ‚îÄ cards/\n        ‚îú‚îÄ‚îÄ ships/\n        ‚îî‚îÄ‚îÄ characters/\n```\n\n---\n\n## üèóÔ∏è Estructura ContentSchema (tipos/content-schema.ts)\n\n```typescript\ninterface ContentSchema {\n  version: string;                // \"1.0.0\"\n  metadata: {...};                // Informaci√≥n del contenido\n  \n  // CARTAS DE JUEGO\n  cards: GameCard[];\n  ships: ShipCard[];\n  \n  // TIENDAS\n  shops: Shop[];\n  \n  // NARRATIVA Y EVENTOS\n  encounters: EventCard[];\n  hazards: EventCard[];\n  \n  // DI√ÅLOGOS\n  dialogues: DialogueSequence[];\n  messages: MessageWindow[];\n  \n  // EFECTOS Y MEC√ÅNICA\n  synergies: Synergy[];\n  achievements: Achievement[];\n  \n  // CONFIGURACI√ìN\n  flags: Record<string, NarrativeFlag>;\n  combatEffects: Record<string, CombatEffectDefinition>;\n}\n```\n\n---\n\n## üé≤ Ejemplo: Estructura de un Evento\n\n```json\n{\n  \"id\": \"enc_ghost_transmission\",\n  \"title\": \"Transmisi√≥n Fantasma\",\n  \"type\": \"encounter\",\n  \"description\": \"Un antiguo c√≥digo de la Hegemon√≠a\",\n  \"image\": {\n    \"url\": \"content/media/events/transmission.jpg\",\n    \"orientation\": \"horizontal\"\n  },\n  \"video\": null,\n  \"narrative\": {\n    \"intro\": [\n      \"Los sensores de largo alcance captan una transmisi√≥n an√≥mala.\",\n      \"Es un antiguo c√≥digo de la Hegemon√≠a, inactivo durante d√©cadas.\"\n    ],\n    \"prompt\": \"¬øC√≥mo procedes?\"\n  },\n  \"dialogue\": {\n    \"id\": \"dlg_ghost_start\",\n    \"title\": \"Alarma del Sistema\",\n    \"messages\": [\n      {\n        \"character\": \"SYSTEM\",\n        \"text\": \"‚ö†Ô∏è ALERTA: Se√±al an√≥mala detectada\",\n        \"duration\": 1000\n      }\n    ]\n  },\n  \"options\": [\n    {\n      \"id\": \"opt_decode\",\n      \"text\": \"[DECODIFICAR] Usar los sistemas de la nave\",\n      \"requirements\": {\n        \"crew\": [\"CREW_DR_ARIS_THORN\"]\n      },\n      \"consequence\": {\n        \"rolls\": [\n          {\n            \"probability\": 75,\n            \"changes\": {\n              \"credits\": 15,\n              \"xp\": 40\n            },\n            \"flags\": {\n              \"ai_fragment_collected\": true\n            },\n            \"affinity\": {\n              \"CREW_DR_ARIS_THORN\": 1\n            },\n            \"achievement\": \"GHOST_IN_THE_MACHINE\",\n            \"narrative\": {\n              \"reaction\": \"Dr. Thorn: 'Interceptando... Lo tengo.'\",\n              \"log\": \"El Dr. Thorn extrae un paquete de datos valioso.\"\n            },\n            \"messages\": [\n              {\n                \"id\": \"msg_success\",\n                \"type\": \"success\",\n                \"title\": \"Datos Adquiridos\",\n                \"content\": \"¬°+15 Cr√©ditos!\",\n                \"duration\": 2000\n              }\n            ]\n          },\n          {\n            \"probability\": 25,\n            \"changes\": {\n              \"hullDamage\": 5\n            },\n            \"narrative\": {\n              \"reaction\": \"Dr. Thorn: '¬°Es una trampa!'\",\n              \"log\": \"Una sobrecarga da√±a los sistemas.\"\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"id\": \"opt_respond\",\n      \"text\": \"[RESPONDER] Usar el Protocolo Vex\",\n      \"requirements\": {\n        \"narrativeFlags\": [\"knows_vex_code\"]\n      },\n      \"consequence\": {\n        \"rolls\": [\n          {\n            \"probability\": 100,\n            \"changes\": {\n              \"xp\": 50\n            },\n            \"narrative\": {\n              \"log\": \"Recibes coordenadas de encuentro secreto...\"\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"id\": \"opt_ignore\",\n      \"text\": \"[IGNORAR] Es demasiado riesgoso\",\n      \"consequence\": {\n        \"rolls\": [\n          {\n            \"probability\": 100,\n            \"changes\": {\n              \"moral\": -1\n            },\n            \"narrative\": {\n              \"log\": \"La tripulaci√≥n murmura decepci√≥n.\"\n            }\n          }\n        ]\n      }\n    }\n  ]\n}\n```\n\n---\n\n## üë§ Ejemplo: Carta de Tripulaci√≥n\n\n```json\n{\n  \"id\": \"CREW_DR_ARIS_THORN\",\n  \"type\": \"Crew\",\n  \"name\": \"Dr. Aris Thorn\",\n  \"faction\": \"Academia\",\n  \"rarity\": \"Common\",\n  \"cost\": 0,\n  \"price\": 7,\n  \"image\": \"content/media/cards/dr-aris-thorn.jpg\",\n  \"description\": \"Investigador dedicado. Sinergia: Academia\",\n  \"flavorText\": \"'La verdad est√° en los datos.'\",\n  \"stats\": {\n    \"attack\": 0,\n    \"defense\": 0,\n    \"special\": \"Decodificaci√≥n de datos antiguos\"\n  },\n  \"synergies\": {\n    \"Academia\": {\n      \"effect\": \"GAIN_ENERGY\",\n      \"value\": 1,\n      \"description\": \"+1 Energ√≠a por miembro de Academia\"\n    }\n  },\n  \"affinity\": {\n    \"CREW_CAPITANA_VEX\": {\n      \"type\": \"neutral\",\n      \"value\": 0,\n      \"description\": \"Sin relaci√≥n particular\"\n    },\n    \"CREW_KAELEN_INGENIERO\": {\n      \"type\": \"positive\",\n      \"value\": 2,\n      \"description\": \"Aliados acad√©micos\"\n    }\n  },\n  \"combatEffects\": [\n    {\n      \"id\": \"effect_analyze\",\n      \"name\": \"An√°lisis Profundo\",\n      \"description\": \"+20 XP en eventos de an√°lisis\",\n      \"trigger\": \"on_event_option\",\n      \"condition\": \"option.type === 'analysis'\",\n      \"effect\": \"ADD_XP_BONUS\",\n      \"value\": 20\n    }\n  ],\n  \"tags\": [\"scientist\", \"academia\", \"support\"]\n}\n```\n\n---\n\n## üö¢ Ejemplo: Nave\n\n```json\n{\n  \"id\": \"SHIP_CORSAIR\",\n  \"type\": \"Ship\",\n  \"name\": \"Corsario Estelar\",\n  \"faction\": \"Neutral\",\n  \"rarity\": \"Uncommon\",\n  \"cost\": 0,\n  \"price\": 0,\n  \"image\": \"content/media/ships/corsair.jpg\",\n  \"description\": \"Nave equilibrada con buen blindaje.\",\n  \"maxHull\": 30,\n  \"maxFuel\": 10,\n  \"maxShields\": 20,\n  \"specialAbility\": {\n    \"id\": \"ability_evasive_maneuver\",\n    \"name\": \"Maniobra Evasiva\",\n    \"description\": \"Aumenta defensa en 5 por turno\",\n    \"trigger\": \"on_combat_start\",\n    \"effect\": \"GAIN_DEFENSE\",\n    \"value\": 5,\n    \"duration\": 1\n  }\n}\n```\n\n---\n\n## üè¨ Ejemplo: Tienda\n\n```json\n{\n  \"id\": \"shop_station_alpha\",\n  \"name\": \"Mercado de Estaci√≥n Alfa\",\n  \"description\": \"Centro comercial de la estaci√≥n\",\n  \"owner\": \"Vendedor Zyx\",\n  \"location\": \"Estaci√≥n Orbital Alfa\",\n  \"traits\": [\n    {\n      \"id\": \"trait_generous\",\n      \"name\": \"Generoso\",\n      \"effect\": {\n        \"name\": \"Descuento en Cartas\",\n        \"effect\": \"Reduce precios\",\n        \"description\": \"30% de descuento en todas las cartas\"\n      },\n      \"priceModifier\": -0.3,\n      \"stockModifier\": 2\n    }\n  ],\n  \"inventory\": [\n    { \"cardId\": \"CREW_KAELEN_INGENIERO\", \"quantity\": 1 },\n    { \"cardId\": \"CREW_ZARA_ARTILLERA\", \"quantity\": 1 },\n    { \"cardId\": \"ATTACK_1\", \"quantity\": 3 }\n  ],\n  \"services\": {\n    \"removeCard\": true,\n    \"repairHull\": true,\n    \"upgradeCard\": false\n  },\n  \"dialogue\": {\n    \"id\": \"dlg_shop_welcome\",\n    \"title\": \"Bienvenida a la Tienda\",\n    \"messages\": [\n      {\n        \"character\": \"CREW_ZYX_COMERCIANTE\",\n        \"text\": \"¬°Bienvenido! Mira mi inventario.\",\n        \"duration\": 2000\n      }\n    ]\n  }\n}\n```\n\n---\n\n## üí¨ Ejemplo: Di√°logo\n\n```json\n{\n  \"id\": \"dlg_vex_discovery\",\n  \"title\": \"Descubrimiento de Vex\",\n  \"characters\": [\"CREW_CAPITANA_VEX\", \"CREW_DR_ARIS_THORN\"],\n  \"background\": {\n    \"url\": \"content/media/backgrounds/bridge.jpg\"\n  },\n  \"messages\": [\n    {\n      \"character\": \"CREW_CAPITANA_VEX\",\n      \"text\": \"Este c√≥digo... lo reconozco. Protocolo Vex.\",\n      \"image\": {\n        \"url\": \"content/media/characters/vex-reaction.jpg\",\n        \"orientation\": \"vertical\"\n      },\n      \"duration\": 3000,\n      \"effect\": \"fade-in\"\n    },\n    {\n      \"character\": \"CREW_DR_ARIS_THORN\",\n      \"text\": \"¬øVex? Esa civilizaci√≥n fue aniquilada hace siglos.\",\n      \"image\": {\n        \"url\": \"content/media/characters/thorn-curious.jpg\",\n        \"orientation\": \"vertical\"\n      },\n      \"duration\": 3000\n    },\n    {\n      \"character\": \"SYSTEM\",\n      \"text\": \"Se establece bandera narrativa: knows_vex_code\",\n      \"duration\": 1500\n    }\n  ]\n}\n```\n\n---\n\n## üîó Ejemplo: Sinergia\n\n```json\n{\n  \"id\": \"SYNERGY_ACADEMY_ENERGY\",\n  \"name\": \"Sinergia Academia - Energ√≠a\",\n  \"description\": \"La Academia comparte conocimiento energ√©tico.\",\n  \"factions\": [\"Academia\"],\n  \"minCount\": 1,\n  \"effect\": \"GAIN_ENERGY\",\n  \"value\": 1,\n  \"bonus\": \"Cada miembro de Academia otorga +1 energ√≠a al inicio del combate\",\n  \"visual\": {\n    \"id\": \"vfx_academy_glow\",\n    \"type\": \"overlay\",\n    \"content\": {\n      \"image\": {\n        \"url\": \"content/media/effects/academy-glow.png\"\n      }\n    },\n    \"duration\": 500,\n    \"animation\": \"fade-in\"\n  }\n}\n```\n\n---\n\n## üìä Flujo de Carga de Contenido\n\n```\nApp inicia\n    ‚Üì\nContentEngine.load('content/content.json')\n    ‚Üì\nValidar contra schema\n    ‚Üì\nParsear y cachear datos\n    ‚Üì\nDisponible en toda la app\n    ‚Üì\nComponentes usan: engine.getEvent(), engine.getCard(), etc.\n```\n\n---\n\n## üé¨ Editor Web - Estructura\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  NAVEGADOR GAL√ÅCTICO - Content Editor v1.0         ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ [Eventos] [Cartas] [Naves] [Tiendas] [Di√°logos]   ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ                                                     ‚îÇ\n‚îÇ  EVENTOS                                            ‚îÇ\n‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ\n‚îÇ  ‚îÇ Lista de Eventos    ‚îÇ  ‚îÇ Editor / Preview   ‚îÇ   ‚îÇ\n‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ                    ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ ‚úì Transmisi√≥n...    ‚îÇ  ‚îÇ T√≠tulo: [input]    ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ ‚úì Anomal√≠a Ines...  ‚îÇ  ‚îÇ Tipo: [select]     ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ ‚óã [Nuevo]           ‚îÇ  ‚îÇ                    ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ Narrative:         ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ   Intro 1: [text]  ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ   Intro 2: [text]  ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ                    ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ [+ Opci√≥n]         ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ [Guardar] [Prev]   ‚îÇ   ‚îÇ\n‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ\n‚îÇ                                                     ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n---\n\n## üõ†Ô∏è Herramientas del Editor\n\n### **Funcionalidades:**\n1. ‚úÖ CRUD completo (Crear, Leer, Actualizar, Borrar)\n2. ‚úÖ Preview en tiempo real de eventos\n3. ‚úÖ Validaci√≥n en vivo (errores en rojo)\n4. ‚úÖ Gestor de medios (upload de im√°genes/videos)\n5. ‚úÖ Selector de referencias (combobox de cartas, personajes, etc)\n6. ‚úÖ Visualizador de probabilidades\n7. ‚úÖ Export/Import JSON\n8. ‚úÖ B√∫squeda y filtrado\n9. ‚úÖ Historial de cambios\n10. ‚úÖ Validaci√≥n de esquema\n\n### **Tecnolog√≠a:**\n- HTML5 + Vanilla JS (o Alpine.js para reactividad)\n- IndexedDB para almacenar drafts\n- Descarga JSON nativo del navegador\n- Drag & drop para reordenar\n\n---\n\n## üéÆ Motor de Contenido (ContentEngine)\n\n```typescript\nclass ContentEngine {\n  private schema: ContentSchema;\n  private cache: Map<string, any>;\n  \n  async load(path: string) {\n    const json = await fetch(path).then(r => r.json());\n    this.validate(json);\n    this.schema = json;\n    this.buildCache();\n  }\n  \n  getEvent(type: 'encounter' | 'hazard'): EventCard {\n    // Retorna evento aleatorio sin repetir\n  }\n  \n  getCard(id: string): GameCard {\n    // Retorna carta por ID\n  }\n  \n  resolveConsequence(option: EventOption, playerState): StateChanges {\n    // Calcula cambios seg√∫n probabilidades\n  }\n  \n  resolveDialogue(dialogueId: string): DialogueSequence {\n    // Obtiene y renderiza di√°logo\n  }\n  \n  calculateSynergy(crew: string[], state): SynergyBonus {\n    // Calcula sinergias activas\n  }\n}\n```\n\n---\n\n## üìà Fases de Implementaci√≥n\n\n### **Fase 1: Esquema + Motor (esta semana)**\n- ‚úÖ Tipos TypeScript completos\n- [ ] JSON de ejemplo\n- [ ] ContentEngine b√°sico\n\n### **Fase 2: Editor Web (pr√≥xima semana)**\n- [ ] Interfaz HTML\n- [ ] CRUD para eventos\n- [ ] Preview\n- [ ] Guardado/carga\n\n### **Fase 3: Expansi√≥n (semana 3)**\n- [ ] Editor de cartas/naves\n- [ ] Editor de tiendas\n- [ ] Editor de di√°logos\n- [ ] Gestor de medios\n\n### **Fase 4: Integraci√≥n (semana 4)**\n- [ ] Reemplazar constants.ts\n- [ ] Integrar en componentes React\n- [ ] Testing del motor\n- [ ] Optimizaci√≥n de carga\n\n---\n\n## üíæ Beneficios de esta Arquitectura\n\n‚úÖ **Separaci√≥n de preocupaciones:** Contenido ‚â† C√≥digo  \n‚úÖ **F√°cil de mantener:** Editar JSON sin riesgo  \n‚úÖ **Escalable:** Agregar 100 eventos es trivial  \n‚úÖ **Colaborativo:** Otros pueden editar contenido  \n‚úÖ **Versionable:** Git controla JSON  \n‚úÖ **Flexible:** Cambiar mec√°nicas es f√°cil  \n‚úÖ **Testeable:** Validar schemas autom√°ticamente  \n‚úÖ **Portable:** JSON es universal  \n\n---\n\n## üìù Pr√≥ximo Paso\n\n1. ‚úÖ Definir tipos (types/content-schema.ts)\n2. [ ] Crear archivo JSON de ejemplo lleno\n3. [ ] Dise√±ar editor web (HTML/CSS/JS)\n4. [ ] Implementar motor (ContentEngine)\n5. [ ] Integrar en juego\n\n**¬øComenzamos con el JSON de ejemplo?**\n"}